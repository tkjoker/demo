<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>

<body>
    <script>
        //练习！！利用for循环计算1 * 2 * 3 * ... * 10的结果：
        var x = 1;
        var i;
        for (i = 1; i <= 10; i++) {
            x = x * i
        }
        // 练习！！请利用循环遍历数组中的每个名字，并显示Hello, xxx!：
        // 请尝试for循环和while循环，并以正序、倒序两种方式遍历。
        // for循环，正序遍历
        var arr = ['Bart', 'Lisa', 'Adam'];
        var i, x;
        for (i = 0; i < arr.length; i++) {
            x = arr[i];
            console.log('Hello,' + x)
        }
        // for...in循环，正序遍历
        var arr = ['Bart', 'Lisa', 'Adam'];
        for (key in arr) {
            console.log('hello,' + arr[key])
        }
        // for循环，倒序遍历
        var arr = ['Bart', 'Lisa', 'Adam'];
        var i, x;
        for (i = arr.length - 1; i >= 0; i--) {
            x = arr[i];
            console.log('Hello,' + x)
        }
        // while循环，正序遍历
        var arr = ['Bart', 'Lisa', 'Adam'];
        // i从左边开始
        var i = 0;
        while (i < arr.length) {
            console.log('Hello,' + arr[i]);
            i++;
        }
        // while循环，倒序遍历
        var arr = ['Bart', 'Lisa', 'Adam'];
        // i从右边开始
        var i = arr.length - 1;
        while (i >= 0) {
            console.log('Hello,' + arr[i]);
            i--;
        }

        // 循环最常用的地方是利用索引来遍历数组
        // 从数组第一项到数组最后一项，遍历，然后打印出来，i每次自增1，i小于数组长度
        let arr = ['Apple', 'Google', 'Microsoft']
        let i, x;
        for (i = 0; i < arr.length; i++) {
            x = arr[i];
            console.log(x)
        }
        // 循环的3个条件是可以省略的，如果没有退出循环的判断条件，就必须用break语句退出循环，否则进入死循环
        // 会打印出1-101，在101的时候退出了循环，本循环结束
        let x = 0;
        for (;;) { //将无限循环下去
            if (x > 100) {
                break; //通过if判断来退出循环
            }
            x++;
            console.log(x)
        }
        // for循环的一个变体是for...in循环，它可以把一个对象的所有属性依次循环出来
        let o = {
            name: 'Jack',
            age: 20,
            city: 'Beijing'
        };
        for (let key in o) {
            console.log(key); //'name','age','city'
        }
        // 用hasOwnProperty()来实现过滤对象继承的属性
        // 用来检测一个属性是否是对象的自有属性，而不是从原型链继承的。如果该属性是自有属性，那么返回 true，否则返回 false。
        // 换句话说，hasOwnProperty() 方法不会检测对象的原型链，只会检测当前对象本身，只有当前对象本身存在该属性时才返回 true。
        let o = {
            name: 'Jack',
            age: 20,
            city: 'Beijing'
        };
        for (let key in o) {
            if (o.hasOwnProperty(key)) {
                console.log(key); // 'name', 'age', 'city'
            }
        }
        // 由于Array也是对象，它的每个元素的索引都被视为对象的属性，因此for...in循环可以直接循环出Array的索引
        let a = ['A', 'B', 'C'];
        // for...in对Array的循环得到的是String而不是Number
        for (let i in a) {
            // 打印i就是打印索引
            console.log(i); //'0', '1', '2'
            // 打印a[i]就是打印整个数组
            consloe.log(a[i]); //'A', 'B', 'C'
        }
        // 循环提供了一种快速而简单的方式去做一些重复的事。
        // 把循环想成一种计算机化的游戏，告诉某人在一个方向上走X步，然后在另一个方向上走Y步。
        // 向东走5步可以用一个循环来表达
        let step;
        for (step = 0; step < 5; step++) {
            // Runs 5 times, with values of step 0 through 4.
            console.log('Walking east one step');
        }

        // 循环有很多种类，他们本质上都是做同一件事:把动作重复了很多次(实际上重复的次数有可能为0)
        // 各种循环机制提供了不同的方法去确定循环的开始和结束。不同情况下，某种类型循环会比其他循环用起来更简单。

        // for语句
        // 一个for循环会一直重复执行，直到指定的循环条件为false
        function howMany(selectObject) {
            let numberSelected = 0;
            for (let i = 0; i < selectObject.options.length; i++) {
                if (selectObject.options[i].selected) {
                    numberSelected++;
                }
            }
            return numberSelected;
        }

        let btn = document.getElementById("btn");
        btn.addEventListener("click", function() {
            alert('选择选项的数量是: ' + howMany(document.selectForm.musicTypes))
        });

        // do...while语句
        // 一直重复到指定的条件求值得到false
        // 下面的例子，这个do循环至少重复一次，并一直重复到i不再小于5
        let i = 0;
        do {
            i += 1;
            console.log(i);
        } while (i < 5);

        // while语句
        // 只有一个循环条件，条件满足，就不断循环，条件不满足则退出循环
        // 一个while语句只要指定的条件值为true就会一直执行它的语句块

        // 我们要计算100以内所有奇数之和，可以用while循环实现
        // 计算的方式是:0+99+97+....+1=2500
        let x = 0;
        let n = 99;
        while (n > 0) {
            x = x + n;
            n = n - 2;
            // 在循环内部n不断自减，直到变为-1时，不再满足n>0的while条件，循环退出
            // x的结果是2500
        }
        // do...while
        // 它和while循环的区别在于，不是在每次循环开始的时候判断条件。而是在每次循环完成的时候判断条件
        // do...while先执行循环，然后在循环完成再去看循环条件是否满足，不满足就退出循环
        let n = 0;
        do {
            n = n + 1;
        } while (n < 100); // n的结果是100
        // 用do{...}while()循环要小心，循环体会至少执行1次，而for和while循环则可能一次都不执行

        // 只要n小于3，下面的while循环就会一直执行
        let n = 0;
        let x = 0;
        while (n < 3) {
            n++;
            x += n;
        }
        // 在每次循环里，n会增加1，并被加到x上，所以，x和n的变化是：
        // 第一次完成后 n=1 x=1
        // 第一次完成后 n=2 x=3
        // 第一次完成后 n=3 x=6
        // 在三次完成后 条件n<3的结果不再为真 循环终止

        // 避免无穷循环(无限循环)，保证循环的条件结果最终会变成假。否则循环永远不会停止
        // 下面这个while循环将会永远执行

        // while (true) {
        // console.log("Hello, world");
        // }

        // label语句
        // 一个label语句提供了一个让你在程序中其他位置引用它的标识符。
        // 用label语句引用，然后使用break或者continue来指出程序是否该停止循环还是继续循环。

        // 标记 markLoop 标识了一个 while 循环
        markLoop:
            while (theMark == true) {
                doSomething();
            }

        // 比较典型的例子
        // 未添加 Label：
        let num = 0;
        for (let i = 0; i < 10; i++) { // i 循环
            for (var j = 0; j < 10; j++) { // j 循环
                if (i == 5 && j == 5) {
                    break; // i = 5，j = 5 时，会跳出 j 循环
                } // 但 i 循环会继续执行，等于跳出之后又继续执行更多次 j 循环
                num++;
            }
        }

        alert(num); // 输出 95
        // 添加 Label 后：
        let num = 0;
        outPoint:
            for (let i = 0; i < 10; i++) {
                for (let j = 0; j < 10; j++) {
                    if (i == 5 && j == 5) {
                        break outPoint; // 在 i = 5，j = 5 时，跳出所有循环，
                        // 返回到整个 outPoint 下方，继续执行
                    }
                    num++;
                }
            }

        alert(num); // 输出 55
        // 使用 continue 语句
        let num = 0;
        outPoint:
            for (let i = 0; i < 10; i++) {
                for (let j = 0; j < 10; j++) {
                    if (i == 5 && j == 5) {
                        continue outPoint;
                    }
                    num++;
                }
            }
        alert(num); // 95

        // break语句
        // 使用break语句来终止循环，或者是链接到label语句
        // 当你使用不带label的break时，它会立即终止当前所在的while，do-while,for,或者switch并把控制权交回这些结构后面的语句
        // 当你使用带label的break时，它会终止指定的带标记(label)的语句
        // break 语句的语法看起来像这样：break [label];
        // []包裹的内容可以被省略。若省略，则终止当前所在的循环或switch;若不省略，则终止指定的label语句。

        // 下面的例子循环数组里的元素，直到找到一个等于theValue的值
        for (i = 0; i < a.length; i++) {
            if (a[i] == theValue) {
                break;
            }
        }

        // 下面的例子终止一个label
        let x = 0;
        let z = 0
        labelCancelLoops: while (true) {
                console.log("外部循环: " + x);
                x += 1; //x自增1 和x++等价 x++效率最高
                z = 1;
                while (true) {
                    console.log("内部循环: " + z);
                    z += 1;
                    if (z === 10 && x === 10) {
                        break labelCancelLoops;
                    } else if (z === 10) {
                        break;
                    }
                }
            }
            // 打印出一组数字 外部0 内部1-9 外部1 内部1-9 ......  外部9 内部1-9

        // continue语句  ???
        // continue语句可以用来继续执行(跳过代码块的剩余部分并进入下一循环)
        // 一个while、do-while、for,或者label语句

        // 例子1
        let i = 0;
        let n = 0;
        while (i < 5) {
            i++;
            if (i == 3) {
                continue;
            }
            n += i;
            console.log(n);
        }
        // 每次给n赋予一个新的值
        // 循环第一次i=1 n=0 n+=i就是0+=1 打印n n=1
        // 循环第二次i=2 n=1 n+=i就是2+=1 打印n n=3
        // 循环第三次i=3 跳出本次循环 不执行
        // 循环第四次i=4 n=3 n+=i就是4+=3 打印n n=7
        // 循环第五次 因为i<5 所以n+=i就是7+=5 打印n n=12
        // 输出结果为1,3,7,12

        // 例子2
        let i = 0;
        let n = 0;
        while (i < 5) {
            i++;
            if (i == 3) {
                // continue; 
            }
            n += i;
            console.log(n);
        }
        // 每次给n赋予一个新的值
        // 循环第一次i=1 n=0 n+=i就是0+=1 打印n n=1
        // 循环第二次i=2 n=1 n+=i就是2+=1 打印n n=3
        // 循环第三次i=3 n=3 n+=i就是3+=3 打印n n=6
        // 循环第四次i=4 n=6 n+=i就是6+=4 打印n n=10
        // 循环第五次i=5 n=10 n+=i就是10+=5 打印n n=15
        // 1,3,6,10,15

        // for...in语句
        // for...in语句循环一个指定变量来循环一个对象所有可枚举属性
        // JavaScript会为每一个不同的属性执行指定的语句

        // 例子
        // 下面的函数通过它的参数得到一个对象和这个对象的名字
        // 然后循环这个对象的所有属性并且返回一个列出属性名和该属性值的字符串
        function dump_props(obj, obj_name) {
            let result = "";
            for (let i in obj) {
                result += obj_name + "." + i + " = " + obj[i] + "<br>";
            }
            result += "<hr>";
            return result;
        }

        // foo...of语句
        // foo...of语句在可迭代对象(包括Array,Map,Set,arguments)上创建了一个循环，对值的每一个独特属性调用一次迭代

        // 例子展示了foo...of和foo...in两种循环语句之间的区别。
        // foo...in循环遍历的结果是数组元素下表，而for...of遍历的结果是元素的值
        let arr = [3, 5, 7];
        arr.foo = "hello";

        for (let i in arr) {
            console.log(i); // 输出 "0", "1", "2", "foo"
        }

        for (let i of arr) {
            console.log(i); // 输出 "3", "5", "7"
        }

        // 注意 for...of 的输出没有出现 "hello"
        // 译者：官方文档不知为何在此使用三个空格来缩进…
    </script>
</body>

</html>